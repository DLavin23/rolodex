// Dropdowns
// ========================================

// Functionality
// ========================================

[data-dropdown]
  @extend .position-relative
  
[data-dropdown-content]
  @extend %opacity-0
  @extend %pointer-events-none
  @extend .position-absolute
  @extend %transition-all
  z-index: 4

  [data-dropdown-open] &
    @extend %opacity-1
    @extend %pointer-events-auto

// Dropdown arrow
// ========================================

.dropdown,
.dropdown-alt
  @extend .display-inline-block
  @extend %vertical-align-middle

.dropdown:after
  @extend .i-caret
  @extend %content-empty
  @extend %cursor-pointer
  @extend .position-absolute
  +rem(right, $gutter-half)
  @extend %center-y
  z-index: 3

.dropdown:hover:after,
.dropdown[data-dropdown-open]:after,
[data-dropdown-open] .dropdown:after
  +rem(background-position, 0 -8px)

// Dropdown toggle
// ========================================

.dropdown-toggle
  @extend %background-white
  @extend %border-base
  @extend %border-radius-base
  @extend %color-black-offset
  @extend %cursor-pointer
  +rem(padding, ($baseline-step + 2) 36px ($baseline-step + 2) ($gutter-half - 1))
  @extend %text-left

  &:focus
    outline: 0

  [data-dropdown-open] &
    border-color: $blue

  .form-row &
    border-bottom-left-radius: 0
    border-top-left-radius: 0

.dropdown-toggle-solo
  +rem(padding, 20px 26px 20px 14px)

// Menu
// ========================================

.dropdown-menu
  @extend .box-overlay
  @extend .margin-top-x-small
  +rem(min-width, 140px)
  right: 0
  top: 100%

  .dropdown-right &
    left: 0
    right: auto

.dropdown-menu-item
  +rem(border-bottom, 1px solid $gray-light)

  &:last-child
    border-bottom: 0

  a
    @extend %color-black-offset
    @extend .display-block
    +rem(padding, 10px 22px)

    &:hover,
    &:focus
      @extend %color-blue

// Within a form row
// ========================================

.form-row

  [data-dropdown]
    @extend .grid-1-1
    
    .form-control:first-child,
    .form-area:first-child
      border-bottom-left-radius: 0
      border-top-left-radius: 0

    &:not(:first-child):not(:last-child)
      .form-control,
      .form-area
        border-radius: 0

  .dropdown-toggle
    +rem(min-height, $baseline-step * 7)

// Error state
// ========================================

.form-error .dropdown-toggle
  border-color: $red
